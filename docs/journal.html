<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />


<meta name="author" content="Aibar Kobdabayev" />

<meta name="date" content="2020-11-25" />

<title>Journal (reproducible report)</title>

<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/bootstrap.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<link href="site_libs/anchor-sections-1.0/anchor-sections.css" rel="stylesheet" />
<script src="site_libs/anchor-sections-1.0/anchor-sections.js"></script>

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>



<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />



<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
</style>


<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 51px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h2 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h3 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h4 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h5 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h6 {
  padding-top: 56px;
  margin-top: -56px;
}
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #ffffff;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  background: white;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row-fluid">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">MyLabJournal</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">Home</a>
</li>
<li>
  <a href="journal.html">Journal</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Class notes
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="dictionary.html">Dictionary</a>
    </li>
    <li>
      <a href="data_wrangling.html">Data Wrangling</a>
    </li>
    <li>
      <a href="ggplot_graphs.html">ggplot graphs</a>
    </li>
    <li>
      <a href="machine_learning.html">machine learning</a>
    </li>
  </ul>
</li>
<li>
  <a href="links.html">Links</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div class="fluid-row" id="header">



<h1 class="title toc-ignore">Journal (reproducible report)</h1>
<h4 class="author">Aibar Kobdabayev</h4>
<h4 class="date">2020-11-25</h4>

</div>


<div id="challenge-1" class="section level1">
<h1><span class="header-section-number">1</span> Challenge #1</h1>
<p>Last compiled: 2020-12-06</p>
<p>Analyze the sales by location (state) with a bar plot. Since state and city are multiple features (variables), they should be split. Which state has the highes revenue?</p>
<div id="load-libraries" class="section level2">
<h2><span class="header-section-number">1.1</span> Load libraries:</h2>
<pre><code>library(tidyverse)
library(readxl)
</code></pre>
</div>
<div id="import-files" class="section level2">
<h2><span class="header-section-number">1.2</span> Import files:</h2>
<pre class="r"><code>bikes_tbl &lt;- readxl::read_excel(&quot;./00_data/01_bike_sales/01_raw_data/bikes.xlsx&quot;)
orderlines_tbl &lt;- readxl::read_excel(&quot;./00_data/01_bike_sales/01_raw_data/orderlines.xlsx&quot;)
bikeshops_tbl &lt;- readxl::read_excel(&quot;./00_data/01_bike_sales/01_raw_data/bikeshops.xlsx&quot;)</code></pre>
</div>
<div id="examine-data-for-imported-tables" class="section level2">
<h2><span class="header-section-number">1.3</span> Examine data for imported tables:</h2>
<pre class="r"><code>bikeshops_tbl</code></pre>
<pre><code>## # A tibble: 30 x 5
##    bikeshop.id name                  location                          lat   lng
##          &lt;dbl&gt; &lt;chr&gt;                 &lt;chr&gt;                           &lt;dbl&gt; &lt;dbl&gt;
##  1           1 Zum Goldenen Lenker   Berlin, Berlin                   52.5 13.4 
##  2           2 AlexandeRad           Hamburg, Hamburg                 53.6 10.0 
##  3           3 Fahrradladen 16       Munich, Bavaria                  48.2 11.6 
##  4           4 Bikestation Köln      Cologne, North Rhine-Westphalia  50.9  6.95
##  5           5 Montimare             Frankfurt, Hesse                 50.1  8.68
##  6           6 fahrschneller         Stuttgart, Baden-Württemberg     48.8  9.18
##  7           7 Rad Ab                Düsseldorf, North Rhine-Westph…  51.2  6.79
##  8           8 Lucky Bike            Dortmund, North Rhine-Westphal…  51.5  7.47
##  9           9 Zweirad-Center Stadl… Essen, North Rhine-Westphalia    51.5  7.01
## 10          10 WITT-RAD              Bremen, Bremen                   53.1  8.83
## # … with 20 more rows</code></pre>
<pre class="r"><code>orderlines_tbl</code></pre>
<pre><code>## # A tibble: 15,644 x 7
##    ...1  order.id order.line order.date          customer.id product.id quantity
##    &lt;chr&gt;    &lt;dbl&gt;      &lt;dbl&gt; &lt;dttm&gt;                    &lt;dbl&gt;      &lt;dbl&gt;    &lt;dbl&gt;
##  1 1            1          1 2015-01-07 00:00:00           2       2681        1
##  2 2            1          2 2015-01-07 00:00:00           2       2411        1
##  3 3            2          1 2015-01-10 00:00:00          10       2629        1
##  4 4            2          2 2015-01-10 00:00:00          10       2137        1
##  5 5            3          1 2015-01-10 00:00:00           6       2367        1
##  6 6            3          2 2015-01-10 00:00:00           6       1973        1
##  7 7            3          3 2015-01-10 00:00:00           6       2422        1
##  8 8            3          4 2015-01-10 00:00:00           6       2655        1
##  9 9            3          5 2015-01-10 00:00:00           6       2247        1
## 10 10           4          1 2015-01-11 00:00:00          22       2408        1
## # … with 15,634 more rows</code></pre>
<pre class="r"><code>bikes_tbl</code></pre>
<pre><code>## # A tibble: 231 x 9
##    bike.id model  model.year frame.material weight price category gender url    
##      &lt;dbl&gt; &lt;chr&gt;       &lt;dbl&gt; &lt;chr&gt;           &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;    &lt;chr&gt;  &lt;chr&gt;  
##  1    2875 Aeroa…       2020 carbon           7.6   4579 Road - … unisex https:…
##  2    2873 Aeroa…       2020 carbon           7.27  6919 Road - … unisex https:…
##  3    2874 Aeroa…       2020 carbon           7.1   6429 Road - … unisex https:…
##  4    2876 Aeroa…       2020 carbon           7.73  5069 Road - … unisex https:…
##  5    2877 Aeroa…       2020 carbon           7.83  3609 Road - … unisex https:…
##  6    2225 Aeroa…       2019 carbon           6.8   6139 Road - … unisex https:…
##  7    2091 Aeroa…       2019 carbon           6.8   5359 Road - … unisex https:…
##  8    2086 Aeroa…       2021 carbon           7.6   2629 Road - … unisex https:…
##  9    2088 Aeroa…       2020 carbon           7.3   3699 Road - … unisex https:…
## 10    2120 Aeroa…       2020 carbon           7.2   3219 Road - … female https:…
## # … with 221 more rows</code></pre>
</div>
<div id="data-manipulation.-join-tables" class="section level2">
<h2><span class="header-section-number">1.4</span> Data manipulation. Join tables:</h2>
<pre class="r"><code>bike_orderlines_joined_tbl &lt;- orderlines_tbl %&gt;%
  dplyr::left_join(bikes_tbl, by = c(&quot;product.id&quot; = &quot;bike.id&quot;)) %&gt;%
  dplyr::left_join(bikeshops_tbl, by = c(&quot;customer.id&quot; = &quot;bikeshop.id&quot;))
bike_orderlines_joined_tbl %&gt;% glimpse()</code></pre>
<pre><code>## Rows: 15,644
## Columns: 19
## $ ...1           &lt;chr&gt; &quot;1&quot;, &quot;2&quot;, &quot;3&quot;, &quot;4&quot;, &quot;5&quot;, &quot;6&quot;, &quot;7&quot;, &quot;8&quot;, &quot;9&quot;, &quot;10&quot;, &quot;11…
## $ order.id       &lt;dbl&gt; 1, 1, 2, 2, 3, 3, 3, 3, 3, 4, 5, 5, 5, 5, 6, 6, 6, 6, …
## $ order.line     &lt;dbl&gt; 1, 2, 1, 2, 1, 2, 3, 4, 5, 1, 1, 2, 3, 4, 1, 2, 3, 4, …
## $ order.date     &lt;dttm&gt; 2015-01-07, 2015-01-07, 2015-01-10, 2015-01-10, 2015-…
## $ customer.id    &lt;dbl&gt; 2, 2, 10, 10, 6, 6, 6, 6, 6, 22, 8, 8, 8, 8, 16, 16, 1…
## $ product.id     &lt;dbl&gt; 2681, 2411, 2629, 2137, 2367, 1973, 2422, 2655, 2247, …
## $ quantity       &lt;dbl&gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2, 1, 1, 1, 1, 1, 1, …
## $ model          &lt;chr&gt; &quot;Spectral CF 7 WMN&quot;, &quot;Ultimate CF SLX Disc 8.0 ETAP&quot;, …
## $ model.year     &lt;dbl&gt; 2021, 2020, 2021, 2019, 2020, 2020, 2020, 2021, 2020, …
## $ frame.material &lt;chr&gt; &quot;carbon&quot;, &quot;carbon&quot;, &quot;carbon&quot;, &quot;carbon&quot;, &quot;aluminium&quot;, &quot;…
## $ weight         &lt;dbl&gt; 13.80, 7.44, 14.06, 8.80, 11.50, 8.80, 8.20, 8.85, 14.…
## $ price          &lt;dbl&gt; 3119, 5359, 2729, 1749, 1219, 1359, 2529, 1559, 3899, …
## $ category       &lt;chr&gt; &quot;Mountain - Trail - Spectral&quot;, &quot;Road - Race - Ultimate…
## $ gender         &lt;chr&gt; &quot;female&quot;, &quot;unisex&quot;, &quot;unisex&quot;, &quot;unisex&quot;, &quot;unisex&quot;, &quot;uni…
## $ url            &lt;chr&gt; &quot;https://www.canyon.com/en-de/mountain-bikes/trail-bik…
## $ name           &lt;chr&gt; &quot;AlexandeRad&quot;, &quot;AlexandeRad&quot;, &quot;WITT-RAD&quot;, &quot;WITT-RAD&quot;, …
## $ location       &lt;chr&gt; &quot;Hamburg, Hamburg&quot;, &quot;Hamburg, Hamburg&quot;, &quot;Bremen, Breme…
## $ lat            &lt;dbl&gt; 53.57532, 53.57532, 53.07379, 53.07379, 48.78234, 48.7…
## $ lng            &lt;dbl&gt; 10.015340, 10.015340, 8.826754, 8.826754, 9.180819, 9.…</code></pre>
</div>
<div id="wrangling-data" class="section level2">
<h2><span class="header-section-number">1.5</span> Wrangling data:</h2>
<pre class="r"><code>bike_orderlines_wrangled_tbl &lt;- bike_orderlines_joined_tbl %&gt;%
    tidyr::separate(col    = location,
           into   = c(&quot;city&quot;, &quot;state&quot;),
           sep    = &quot;, &quot;) %&gt;%
  dplyr::mutate(total_price = price * quantity) %&gt;%
  dplyr::select(order.id, contains(&quot;order&quot;), city, state, quantity, total_price, everything()) %&gt;%
  rename(bikeshop = name) %&gt;%
  magrittr::set_names(names(.) %&gt;% stringr::str_replace_all(&quot;\\.&quot;, &quot;_&quot;))

bike_orderlines_wrangled_tbl</code></pre>
<pre><code>## # A tibble: 15,644 x 21
##    order_id order_line order_date          city  state quantity total_price
##       &lt;dbl&gt;      &lt;dbl&gt; &lt;dttm&gt;              &lt;chr&gt; &lt;chr&gt;    &lt;dbl&gt;       &lt;dbl&gt;
##  1        1          1 2015-01-07 00:00:00 Hamb… Hamb…        1        3119
##  2        1          2 2015-01-07 00:00:00 Hamb… Hamb…        1        5359
##  3        2          1 2015-01-10 00:00:00 Brem… Brem…        1        2729
##  4        2          2 2015-01-10 00:00:00 Brem… Brem…        1        1749
##  5        3          1 2015-01-10 00:00:00 Stut… Bade…        1        1219
##  6        3          2 2015-01-10 00:00:00 Stut… Bade…        1        1359
##  7        3          3 2015-01-10 00:00:00 Stut… Bade…        1        2529
##  8        3          4 2015-01-10 00:00:00 Stut… Bade…        1        1559
##  9        3          5 2015-01-10 00:00:00 Stut… Bade…        1        3899
## 10        4          1 2015-01-11 00:00:00 Augs… Bava…        1        6629
## # … with 15,634 more rows, and 14 more variables: `___1` &lt;chr&gt;,
## #   customer_id &lt;dbl&gt;, product_id &lt;dbl&gt;, model &lt;chr&gt;, model_year &lt;dbl&gt;,
## #   frame_material &lt;chr&gt;, weight &lt;dbl&gt;, price &lt;dbl&gt;, category &lt;chr&gt;,
## #   gender &lt;chr&gt;, url &lt;chr&gt;, bikeshop &lt;chr&gt;, lat &lt;dbl&gt;, lng &lt;dbl&gt;</code></pre>
</div>
<div id="business-insights" class="section level2">
<h2><span class="header-section-number">1.6</span> Business insights</h2>
<p>Creating relevant tables and using gglpot2 package for data visualization.</p>
<pre class="r"><code>library(lubridate)
sales_by_states_tbl &lt;- bike_orderlines_wrangled_tbl %&gt;%
  select(order_date, total_price, state) %&gt;%
  mutate(year = year(order_date)) %&gt;%
  group_by(year, state) %&gt;%
  summarise(sales = sum(total_price)) %&gt;%
  ungroup() %&gt;%
  mutate(sales_text = scales::dollar(sales, big.mark = &quot;.&quot;,
                                            decimal.mark = &quot;,&quot;,
                                            prefix = &quot;&quot;,
                                            suffix = &quot; €&quot;))
sales_by_states_tbl</code></pre>
<pre><code>## # A tibble: 60 x 4
##     year state                           sales sales_text 
##    &lt;dbl&gt; &lt;chr&gt;                           &lt;dbl&gt; &lt;chr&gt;      
##  1  2015 Baden-Württemberg             1031924 1.031.924 €
##  2  2015 Bavaria                       1301461 1.301.461 €
##  3  2015 Berlin                          95853 95.853 €   
##  4  2015 Bremen                        1395912 1.395.912 €
##  5  2015 Hamburg                        423090 423.090 €  
##  6  2015 Hesse                          308609 308.609 €  
##  7  2015 Lower Saxony                   584386 584.386 €  
##  8  2015 Mecklenburg-Western Pomerania  222003 222.003 €  
##  9  2015 North Rhine-Westphalia        3735092 3.735.092 €
## 10  2015 Saxony                         238371 238.371 €  
## # … with 50 more rows</code></pre>
<pre class="r"><code>sales_by_states_tbl %&gt;%
  ggplot2::ggplot(aes(x = year, y = sales, fill = state)) +
  ggplot2::geom_col() +
  ggplot2::facet_wrap(~ state) +
  ggplot2::scale_y_continuous(labels = scales::dollar_format(big.mark = &quot;.&quot;,
                                                             decimal.mark = &quot;,&quot;,
                                                             prefix = &quot;&quot;,
                                                             suffix = &quot; €&quot;)) +
  ggplot2::theme(axis.text = element_text(angle = 45, hjust = 1))</code></pre>
<p><img src="journal_files/figure-html/unnamed-chunk-6-1.png" width="672" /></p>
<pre class="r"><code>  ggplot2::labs(title = &quot;Sales by states&quot;)</code></pre>
<pre><code>## $title
## [1] &quot;Sales by states&quot;
## 
## attr(,&quot;class&quot;)
## [1] &quot;labels&quot;</code></pre>
</div>
</div>
<div id="challenge-2" class="section level1">
<h1><span class="header-section-number">2</span> Challenge #2</h1>
<ol style="list-style-type: lower-alpha">
<li><p>Get some data via an API. There are millions of providers, that offer API access for free and have good documentation about how to query their service. You just have to google them. You can use whatever service you want. For example, you can get data about your listening history (spotify), get data about flights (skyscanner) or just check the weather forecast.</p></li>
<li><p>Scrape one of the competitor websites of canyon (either <a href="https://www.rosebikes.de/" class="uri">https://www.rosebikes.de/</a> or <a href="https://www.radon-bikes.de" class="uri">https://www.radon-bikes.de</a>) and create a small database. The database should contain the model names and prices for at least one category. Use the selectorgadget to get a good understanding of the website structure.</p></li>
</ol>
<pre class="r"><code>#challange 2a
library(httr)
library(glue)
#Data acquisition challenge a)
rick_and_morty_character &lt;- function(path) {
  url &lt;- modify_url(url = &quot;https://rickandmortyapi.com&quot;, path = glue(&quot;/api/character/{path}&quot;))
  resp &lt;- GET(url)
  stop_for_status(resp)
}
resp &lt;- rick_and_morty_character(&quot;/3&quot;) #enter the number of character
content(resp, as = &quot;parsed&quot;)</code></pre>
<pre><code>## $id
## [1] 3
## 
## $name
## [1] &quot;Summer Smith&quot;
## 
## $status
## [1] &quot;Alive&quot;
## 
## $species
## [1] &quot;Human&quot;
## 
## $type
## [1] &quot;&quot;
## 
## $gender
## [1] &quot;Female&quot;
## 
## $origin
## $origin$name
## [1] &quot;Earth (Replacement Dimension)&quot;
## 
## $origin$url
## [1] &quot;https://rickandmortyapi.com/api/location/20&quot;
## 
## 
## $location
## $location$name
## [1] &quot;Earth (Replacement Dimension)&quot;
## 
## $location$url
## [1] &quot;https://rickandmortyapi.com/api/location/20&quot;
## 
## 
## $image
## [1] &quot;https://rickandmortyapi.com/api/character/avatar/3.jpeg&quot;
## 
## $episode
## $episode[[1]]
## [1] &quot;https://rickandmortyapi.com/api/episode/6&quot;
## 
## $episode[[2]]
## [1] &quot;https://rickandmortyapi.com/api/episode/7&quot;
## 
## $episode[[3]]
## [1] &quot;https://rickandmortyapi.com/api/episode/8&quot;
## 
## $episode[[4]]
## [1] &quot;https://rickandmortyapi.com/api/episode/9&quot;
## 
## $episode[[5]]
## [1] &quot;https://rickandmortyapi.com/api/episode/10&quot;
## 
## $episode[[6]]
## [1] &quot;https://rickandmortyapi.com/api/episode/11&quot;
## 
## $episode[[7]]
## [1] &quot;https://rickandmortyapi.com/api/episode/12&quot;
## 
## $episode[[8]]
## [1] &quot;https://rickandmortyapi.com/api/episode/14&quot;
## 
## $episode[[9]]
## [1] &quot;https://rickandmortyapi.com/api/episode/15&quot;
## 
## $episode[[10]]
## [1] &quot;https://rickandmortyapi.com/api/episode/16&quot;
## 
## $episode[[11]]
## [1] &quot;https://rickandmortyapi.com/api/episode/17&quot;
## 
## $episode[[12]]
## [1] &quot;https://rickandmortyapi.com/api/episode/18&quot;
## 
## $episode[[13]]
## [1] &quot;https://rickandmortyapi.com/api/episode/19&quot;
## 
## $episode[[14]]
## [1] &quot;https://rickandmortyapi.com/api/episode/20&quot;
## 
## $episode[[15]]
## [1] &quot;https://rickandmortyapi.com/api/episode/21&quot;
## 
## $episode[[16]]
## [1] &quot;https://rickandmortyapi.com/api/episode/22&quot;
## 
## $episode[[17]]
## [1] &quot;https://rickandmortyapi.com/api/episode/23&quot;
## 
## $episode[[18]]
## [1] &quot;https://rickandmortyapi.com/api/episode/24&quot;
## 
## $episode[[19]]
## [1] &quot;https://rickandmortyapi.com/api/episode/25&quot;
## 
## $episode[[20]]
## [1] &quot;https://rickandmortyapi.com/api/episode/26&quot;
## 
## $episode[[21]]
## [1] &quot;https://rickandmortyapi.com/api/episode/27&quot;
## 
## $episode[[22]]
## [1] &quot;https://rickandmortyapi.com/api/episode/29&quot;
## 
## $episode[[23]]
## [1] &quot;https://rickandmortyapi.com/api/episode/30&quot;
## 
## $episode[[24]]
## [1] &quot;https://rickandmortyapi.com/api/episode/31&quot;
## 
## $episode[[25]]
## [1] &quot;https://rickandmortyapi.com/api/episode/32&quot;
## 
## $episode[[26]]
## [1] &quot;https://rickandmortyapi.com/api/episode/33&quot;
## 
## $episode[[27]]
## [1] &quot;https://rickandmortyapi.com/api/episode/34&quot;
## 
## $episode[[28]]
## [1] &quot;https://rickandmortyapi.com/api/episode/35&quot;
## 
## $episode[[29]]
## [1] &quot;https://rickandmortyapi.com/api/episode/36&quot;
## 
## $episode[[30]]
## [1] &quot;https://rickandmortyapi.com/api/episode/38&quot;
## 
## $episode[[31]]
## [1] &quot;https://rickandmortyapi.com/api/episode/39&quot;
## 
## $episode[[32]]
## [1] &quot;https://rickandmortyapi.com/api/episode/40&quot;
## 
## $episode[[33]]
## [1] &quot;https://rickandmortyapi.com/api/episode/41&quot;
## 
## 
## $url
## [1] &quot;https://rickandmortyapi.com/api/character/3&quot;
## 
## $created
## [1] &quot;2017-11-04T19:09:56.428Z&quot;</code></pre>
<pre class="r"><code>library(tidyverse) 
library(rvest)     
library(jsonlite)  
library(glue)      
library(stringi)   
library(rvest)
library(stringr)

url_home &lt;- &quot;https://www.radon-bikes.de/&quot; %&gt;%
#url_home &lt;- xml2::read_html(url)
read_html()

bike_category_tbl &lt;- url_home %&gt;%
  html_nodes(css = &quot;.megamenu__item&gt; a&quot;) %&gt;%
  html_attr(&#39;href&#39;) %&gt;% 
  enframe(name = &quot;position&quot;, value = &quot;subdirectory&quot;) %&gt;%
  mutate(
    url = glue(&quot;https://www.radon-bikes.de{subdirectory}bikegrid&quot;)
  )

bike_category_tbl</code></pre>
<pre><code>## # A tibble: 10 x 3
##    position subdirectory             url                                        
##       &lt;int&gt; &lt;chr&gt;                    &lt;glue&gt;                                     
##  1        1 /mountainbike/hardtail/  https://www.radon-bikes.de/mountainbike/ha…
##  2        2 /mountainbike/fullsuspe… https://www.radon-bikes.de/mountainbike/fu…
##  3        3 /trekking-cross/trekkin… https://www.radon-bikes.de/trekking-cross/…
##  4        4 /trekking-cross/cross/   https://www.radon-bikes.de/trekking-cross/…
##  5        5 /e-bike/mountainbike/    https://www.radon-bikes.de/e-bike/mountain…
##  6        6 /e-bike/trekking/        https://www.radon-bikes.de/e-bike/trekking…
##  7        7 /roadbike/carbon/        https://www.radon-bikes.de/roadbike/carbon…
##  8        8 /roadbike/alu/           https://www.radon-bikes.de/roadbike/alu/bi…
##  9        9 /wear/radon-wear/        https://www.radon-bikes.de/wear/radon-wear…
## 10       10 /wear/accessoires/       https://www.radon-bikes.de/wear/accessoire…</code></pre>
<pre class="r"><code>bike_category_url &lt;- bike_category_tbl$url[6]

html_bike_category  &lt;- xml2::read_html(bike_category_url)
bike_url_tbl        &lt;- html_bike_category %&gt;%
  
  html_nodes(css = &quot;.m-bikegrid__item &gt; a&quot;) %&gt;%
  html_attr(&quot;href&quot;) %&gt;%
  enframe(name = &quot;position&quot;, value = &quot;category_url&quot;) %&gt;%
  mutate(
  url = glue(&quot;https://www.radon-bikes.de{category_url}&quot;)
      )
bike_url_tbl </code></pre>
<pre><code>## # A tibble: 10 x 3
##    position category_url                         url                            
##       &lt;int&gt; &lt;chr&gt;                                &lt;glue&gt;                         
##  1        1 /e-bike/trekking/solution-hybrid-cx… https://www.radon-bikes.de/e-b…
##  2        2 /e-bike/trekking/solution-hybrid-cx… https://www.radon-bikes.de/e-b…
##  3        3 /e-bike/trekking/solution-hybrid-cx… https://www.radon-bikes.de/e-b…
##  4        4 /e-bike/trekking/solution-hybrid-cx… https://www.radon-bikes.de/e-b…
##  5        5 /e-bike/trekking/solution-hybrid-pe… https://www.radon-bikes.de/e-b…
##  6        6 /e-bike/trekking/solution-hybrid-pe… https://www.radon-bikes.de/e-b…
##  7        7 /e-bike/trekking/solution-hybrid-pe… https://www.radon-bikes.de/e-b…
##  8        8 /e-bike/trekking/solution-hybrid-pe… https://www.radon-bikes.de/e-b…
##  9        9 /e-bike/trekking/solution-hybrid-pe… https://www.radon-bikes.de/e-b…
## 10       10 /e-bike/trekking/solution-hybrid-pe… https://www.radon-bikes.de/e-b…</code></pre>
<pre class="r"><code>#extract descriptions 

bike_price_tbl &lt;- html_bike_category %&gt;%
  html_nodes(&#39;.m-bikegrid__price.currency_eur .m-bikegrid__price--active&#39;) %&gt;%
  html_text() %&gt;%
  enframe(name = &quot;position&quot;, value = &quot;price&quot;)

bike_price_tbl</code></pre>
<pre><code>## # A tibble: 10 x 2
##    position price 
##       &lt;int&gt; &lt;chr&gt; 
##  1        1 2499 €
##  2        2 2499 €
##  3        3 2799 €
##  4        4 2799 €
##  5        5 1999 €
##  6        6 1999 €
##  7        7 1999 €
##  8        8 1999 €
##  9        9 2499 €
## 10       10 2499 €</code></pre>
<pre class="r"><code>bike_title_tbl &lt;- html_bike_category %&gt;%
  html_nodes(&#39;.m-bikegrid__info .a-heading--small&#39;) %&gt;%
  html_text() %&gt;%
  enframe(name = &quot;position&quot;, value = &quot;title&quot;)

bike_title_tbl</code></pre>
<pre><code>## # A tibble: 10 x 2
##    position title                                                               
##       &lt;int&gt; &lt;chr&gt;                                                               
##  1        1 &quot;\n                                    SOLUTION HYBRID 8.0 CX 500\n…
##  2        2 &quot;\n                                    SOLUTION HYBRID 8.0 CX 500 L…
##  3        3 &quot;\n                                    SOLUTION HYBRID 9.0 CX 500\n…
##  4        4 &quot;\n                                    SOLUTION HYBRID 9.0 CX 500 L…
##  5        5 &quot;\n                                    SOLUTION HYBRID PERFORMANCE …
##  6        6 &quot;\n                                    SOLUTION HYBRID PERFORMANCE …
##  7        7 &quot;\n                                    SOLUTION HYBRID PERFORMANCE …
##  8        8 &quot;\n                                    SOLUTION HYBRID PERFORMANCE …
##  9        9 &quot;\n                                    SOLUTION HYBRID PERFORMANCE …
## 10       10 &quot;\n                                    SOLUTION HYBRID PERFORMANCE …</code></pre>
<pre class="r"><code>bike_tbl1 &lt;- merge(x = bike_title_tbl, y = bike_price_tbl, by = &quot;position&quot;)
bike_tbl2 &lt;- merge(x = bike_tbl1, y = bike_url_tbl, by = &quot;position&quot;)




bike_tbl2 %&gt;% 
  select(-position)</code></pre>
<pre><code>##                                                                                                           title
## 1            \n                                    SOLUTION HYBRID 8.0 CX 500\n                                
## 2       \n                                    SOLUTION HYBRID 8.0 CX 500 Lady\n                                
## 3            \n                                    SOLUTION HYBRID 9.0 CX 500\n                                
## 4       \n                                    SOLUTION HYBRID 9.0 CX 500 Lady\n                                
## 5       \n                                    SOLUTION HYBRID PERFORMANCE 7.0\n                                
## 6  \n                                    SOLUTION HYBRID PERFORMANCE 7.0 LAdy\n                                
## 7       \n                                    SOLUTION HYBRID PERFORMANCE 7.0\n                                
## 8  \n                                    SOLUTION HYBRID PERFORMANCE 7.0 LADY\n                                
## 9       \n                                    SOLUTION HYBRID PERFORMANCE 8.0\n                                
## 10 \n                                    SOLUTION HYBRID PERFORMANCE 8.0 LADY\n                                
##     price
## 1  2499 €
## 2  2499 €
## 3  2799 €
## 4  2799 €
## 5  1999 €
## 6  1999 €
## 7  1999 €
## 8  1999 €
## 9  2499 €
## 10 2499 €
##                                                                              category_url
## 1                     /e-bike/trekking/solution-hybrid-cx/solution-hybrid-80-cx-500-2021/
## 2                /e-bike/trekking/solution-hybrid-cx/solution-hybrid-80-cx-500-lady-2021/
## 3                     /e-bike/trekking/solution-hybrid-cx/solution-hybrid-90-cx-500-2021/
## 4                /e-bike/trekking/solution-hybrid-cx/solution-hybrid-90-cx-500-lady-2021/
## 5       /e-bike/trekking/solution-hybrid-performance/solution-hybrid-performance-70-2021/
## 6  /e-bike/trekking/solution-hybrid-performance/solution-hybrid-performance-70-lady-2021/
## 7       /e-bike/trekking/solution-hybrid-performance/solution-hybrid-performance-70-2020/
## 8  /e-bike/trekking/solution-hybrid-performance/solution-hybrid-performance-70-lady-2020/
## 9       /e-bike/trekking/solution-hybrid-performance/solution-hybrid-performance-80-2020/
## 10 /e-bike/trekking/solution-hybrid-performance/solution-hybrid-performance-80-lady-2020/
##                                                                                                                 url
## 1                     https://www.radon-bikes.de/e-bike/trekking/solution-hybrid-cx/solution-hybrid-80-cx-500-2021/
## 2                https://www.radon-bikes.de/e-bike/trekking/solution-hybrid-cx/solution-hybrid-80-cx-500-lady-2021/
## 3                     https://www.radon-bikes.de/e-bike/trekking/solution-hybrid-cx/solution-hybrid-90-cx-500-2021/
## 4                https://www.radon-bikes.de/e-bike/trekking/solution-hybrid-cx/solution-hybrid-90-cx-500-lady-2021/
## 5       https://www.radon-bikes.de/e-bike/trekking/solution-hybrid-performance/solution-hybrid-performance-70-2021/
## 6  https://www.radon-bikes.de/e-bike/trekking/solution-hybrid-performance/solution-hybrid-performance-70-lady-2021/
## 7       https://www.radon-bikes.de/e-bike/trekking/solution-hybrid-performance/solution-hybrid-performance-70-2020/
## 8  https://www.radon-bikes.de/e-bike/trekking/solution-hybrid-performance/solution-hybrid-performance-70-lady-2020/
## 9       https://www.radon-bikes.de/e-bike/trekking/solution-hybrid-performance/solution-hybrid-performance-80-2020/
## 10 https://www.radon-bikes.de/e-bike/trekking/solution-hybrid-performance/solution-hybrid-performance-80-lady-2020/</code></pre>
<pre class="r"><code>bike_tbl2</code></pre>
<pre><code>##    position
## 1         1
## 2         2
## 3         3
## 4         4
## 5         5
## 6         6
## 7         7
## 8         8
## 9         9
## 10       10
##                                                                                                           title
## 1            \n                                    SOLUTION HYBRID 8.0 CX 500\n                                
## 2       \n                                    SOLUTION HYBRID 8.0 CX 500 Lady\n                                
## 3            \n                                    SOLUTION HYBRID 9.0 CX 500\n                                
## 4       \n                                    SOLUTION HYBRID 9.0 CX 500 Lady\n                                
## 5       \n                                    SOLUTION HYBRID PERFORMANCE 7.0\n                                
## 6  \n                                    SOLUTION HYBRID PERFORMANCE 7.0 LAdy\n                                
## 7       \n                                    SOLUTION HYBRID PERFORMANCE 7.0\n                                
## 8  \n                                    SOLUTION HYBRID PERFORMANCE 7.0 LADY\n                                
## 9       \n                                    SOLUTION HYBRID PERFORMANCE 8.0\n                                
## 10 \n                                    SOLUTION HYBRID PERFORMANCE 8.0 LADY\n                                
##     price
## 1  2499 €
## 2  2499 €
## 3  2799 €
## 4  2799 €
## 5  1999 €
## 6  1999 €
## 7  1999 €
## 8  1999 €
## 9  2499 €
## 10 2499 €
##                                                                              category_url
## 1                     /e-bike/trekking/solution-hybrid-cx/solution-hybrid-80-cx-500-2021/
## 2                /e-bike/trekking/solution-hybrid-cx/solution-hybrid-80-cx-500-lady-2021/
## 3                     /e-bike/trekking/solution-hybrid-cx/solution-hybrid-90-cx-500-2021/
## 4                /e-bike/trekking/solution-hybrid-cx/solution-hybrid-90-cx-500-lady-2021/
## 5       /e-bike/trekking/solution-hybrid-performance/solution-hybrid-performance-70-2021/
## 6  /e-bike/trekking/solution-hybrid-performance/solution-hybrid-performance-70-lady-2021/
## 7       /e-bike/trekking/solution-hybrid-performance/solution-hybrid-performance-70-2020/
## 8  /e-bike/trekking/solution-hybrid-performance/solution-hybrid-performance-70-lady-2020/
## 9       /e-bike/trekking/solution-hybrid-performance/solution-hybrid-performance-80-2020/
## 10 /e-bike/trekking/solution-hybrid-performance/solution-hybrid-performance-80-lady-2020/
##                                                                                                                 url
## 1                     https://www.radon-bikes.de/e-bike/trekking/solution-hybrid-cx/solution-hybrid-80-cx-500-2021/
## 2                https://www.radon-bikes.de/e-bike/trekking/solution-hybrid-cx/solution-hybrid-80-cx-500-lady-2021/
## 3                     https://www.radon-bikes.de/e-bike/trekking/solution-hybrid-cx/solution-hybrid-90-cx-500-2021/
## 4                https://www.radon-bikes.de/e-bike/trekking/solution-hybrid-cx/solution-hybrid-90-cx-500-lady-2021/
## 5       https://www.radon-bikes.de/e-bike/trekking/solution-hybrid-performance/solution-hybrid-performance-70-2021/
## 6  https://www.radon-bikes.de/e-bike/trekking/solution-hybrid-performance/solution-hybrid-performance-70-lady-2021/
## 7       https://www.radon-bikes.de/e-bike/trekking/solution-hybrid-performance/solution-hybrid-performance-70-2020/
## 8  https://www.radon-bikes.de/e-bike/trekking/solution-hybrid-performance/solution-hybrid-performance-70-lady-2020/
## 9       https://www.radon-bikes.de/e-bike/trekking/solution-hybrid-performance/solution-hybrid-performance-80-2020/
## 10 https://www.radon-bikes.de/e-bike/trekking/solution-hybrid-performance/solution-hybrid-performance-80-lady-2020/</code></pre>
</div>
<div id="challenge-3" class="section level1">
<h1><span class="header-section-number">3</span> Challenge #3</h1>
<pre class="r"><code>library(tidyverse)
library(vroom)
library(magrittr)
library(lubridate)
library(data.table)



# DATA IMPORT ----
patent &lt;-  &quot;./patent.tsv&quot;
patent_tbl &lt;- fread(patent)
setnames(patent_tbl, &quot;id&quot;, &quot;patent_id&quot;)

assignee  &lt;-   &quot;./assignee.tsv&quot;
assignee_tbl &lt;- fread(assignee)
setnames(assignee_tbl, &quot;id&quot;, &quot;assignee_id&quot;)

patent_assignee &lt;- &quot;./patent_assignee.tsv&quot;
patent_assignee_tbl&lt;- fread(patent_assignee)

uspc &lt;- &quot;./uspc.tsv&quot;
uspc_tbl&lt;- fread(uspc)



# 1. Patent Dominance
assignee_patentAssignee_merged &lt;- merge(assignee_tbl, patent_assignee_tbl, by=&#39;assignee_id&#39;)
na.omit(assignee_patentAssignee_merged, cols=&quot;organization&quot;)

# US company with most patents
assignee_patentAssignee_merged [, .N, by = organization][order(-N)] %&gt;% head(1)%&gt;%na.omit()

# 10 US companies with most assigned/granted patents
assignee_patentAssignee_merged [, .N, by = organization][order(-N)]%&gt;%na.omit() %&gt;% head(10)




#2. Recent patent activity
assignee_patentAssignee_patent_merged &lt;- merge(assignee_patentAssignee_merged, patent_tbl, by=&#39;patent_id&#39;) 
assignee_patentAssignee_patent_merged_view &lt;- assignee_patentAssignee_patent_merged[1:2]

# US company with most patents granted in 2019
assignee_patentAssignee_patent_merged [lubridate::year(date) == 2019, .N, by = organization][order(-N)]%&gt;%na.omit() %&gt;% head(1)

# 10 companies with most new granted patents in 2019
assignee_patentAssignee_patent_merged [lubridate::year(date) == 2019 &amp; kind==&quot;B1&quot;, .N, by = organization][order(-N)]%&gt;%na.omit() %&gt;% head(10)




# 3. Innovation in Tech
assignee_patentAssignee_uspc_merged &lt;- merge(assignee_patentAssignee_merged, uspc_tbl, by=&#39;patent_id&#39;)
assignee_patentAssignee_uspc_merged_view &lt;- assignee_patentAssignee_uspc_merged[1:2]

# Most innovative tech sector
patent_tbl[, .N, by = type][order(-N)] %&gt;% head(1)

# Top 5 USPTO main classes of their patents
assignee_patentAssignee_uspc_merged[organization==&quot;International Business Machines Corporation&quot;, .N, by = mainclass_id][order(-N)]%&gt;% head(5)</code></pre>
</div>
<div id="challenge-4" class="section level1">
<h1><span class="header-section-number">4</span> Challenge #4</h1>
<pre class="r"><code>library(tidyverse)
library(ggthemes)
library(ggplot2)
library(scales)
library(forcats)
library(ggrepel)



covid_data_tbl &lt;- read_csv(&quot;https://opendata.ecdc.europa.eu/covid19/casedistribution/csv&quot;)


covid_data_tbl_compressed &lt;- covid_data_tbl %&gt;%
  
  filter((countriesAndTerritories == &quot;Europe&quot; |
            countriesAndTerritories == &quot;Germany&quot; | 
            countriesAndTerritories == &quot;United_Kingdom&quot; | 
            countriesAndTerritories == &quot;France&quot; | 
            countriesAndTerritories == &quot;Spain&quot; | 
            countriesAndTerritories == &quot;United_States_of_America&quot;) &amp; year == &quot;2020&quot;)%&gt;%
  group_by(countriesAndTerritories, month, year) %&gt;%
  summarise(total_case = sum(cases)) %&gt;%
  ungroup()%&gt;%
  mutate(month=lubridate::month(month,label = TRUE,abbr = TRUE))

covid_data_cumulative_case_tbl &lt;- covid_data_tbl_compressed %&gt;% mutate(cumulative_case=cumsum(total_case))

covid_data_cumulative_case_tbl %&gt;%
  
  ggplot(aes(month, cumulative_case, group=countriesAndTerritories, color = countriesAndTerritories)) +
  
  geom_line(size=.5) +
  scale_y_continuous(labels = scales::dollar_format(scale  = 1/1e6, 
                                                    prefix = &quot;&quot;, 
                                                    suffix = &quot;M €&quot;))+
  theme_minimal() +
  theme(legend.position  = &quot;right&quot;, 
        legend.direction = &quot;vertical&quot;,
        axis.text.x = element_text(angle = 45)) </code></pre>
<p><img src="journal_files/figure-html/unnamed-chunk-10-1.png" width="672" /></p>
<pre class="r"><code>library(tidyverse)
library(ggthemes)
library(ggplot2)
library(scales)
library(forcats)
library(ggrepel)
library(maps)



covid_data_tbl &lt;- read_csv(&quot;https://opendata.ecdc.europa.eu/covid19/casedistribution/csv&quot;)
world &lt;- map_data(&quot;world&quot;)

covid_data_tbl &lt;- covid_data_tbl%&gt;% 
  mutate(across(countriesAndTerritories, str_replace_all, &quot;_&quot;, &quot; &quot;)) %&gt;%
  mutate(countriesAndTerritories = case_when(
    
    countriesAndTerritories == &quot;United Kingdom&quot; ~ &quot;UK&quot;,
    countriesAndTerritories == &quot;United States of America&quot; ~ &quot;USA&quot;,
    countriesAndTerritories == &quot;Czechia&quot; ~ &quot;Czech Republic&quot;,
    countriesAndTerritories == &quot;Bonaire, Saint Eustatius and Saba&quot; ~ &quot;Bonaire&quot;,
    TRUE ~ countriesAndTerritories
  ))


covid_data_tbl &lt;- covid_data_tbl %&gt;%
  rename(region=countriesAndTerritories)

covid_data_tbl &lt;- covid_data_tbl %&gt;%
  group_by(region)%&gt;%
  summarise(total_deaths = sum(deaths), population = mean(popData2019)) %&gt;%
  mutate(mortality_rate = (total_deaths / population)*100) %&gt;%
  ungroup()


world_covid_data_tbl &lt;- dplyr::left_join(world, covid_data_tbl, by=c(&quot;region&quot;))

world_covid_data_tbl %&gt;%
  ggplot(aes(map_id = region)) +
  geom_map(aes(fill = mortality_rate), map = world, color = &quot;white&quot;) +
  expand_limits(x = world_covid_data_tbl$long, y = world_covid_data_tbl$lat) +
  scale_fill_gradient(high = &quot;#541e2b&quot;, low = &quot;#ff8282&quot;, na.value = &quot;grey50&quot;,  guide = &quot;colorbar&quot;)</code></pre>
<p><img src="journal_files/figure-html/unnamed-chunk-11-1.png" width="672" /></p>
</div>



</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open')
  });
});
</script>

<!-- code folding -->

<script>
$(document).ready(function ()  {

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
